{% extends "layout.html" %}

{% block title %}Memoize Summary{% endblock %}

{% block head %}
{{ super() }}
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}" />

    <link rel="stylesheet" href="{{url_for('static', filename='css/zoomooz.css')}}" type="text/css" />
    <script type="text/javascript" src="{{url_for('static', filename='js/sylvester.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/purecssmatrix.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery.zoomooz.js')}}"></script>

    <script src="{{url_for('static', filename='js/jquery.jeditable.mini.js')}}"></script>

    <script type="text/javascript">

    $(document).ready(function()
    {
        $(".click").editable("http://www.appelsiini.net/projects/jeditable/php/echo.php", { 
            indicator : "<img src='{{url_for('static', filename='images/indicator.gif')}}'>",
            tooltip   : "Click to edit...",
            style  : "inherit"
        });
        
        $(".photo").toggle(function(evt) {
            console.log("clicked");
            settings = {
                // zoomed size relative to screen
                // 0.0-1.0
                targetsize: 0.9,
                // scale content to screen based on their size
                // "width"|"height"|"both"
                scalemode: "both",
                // animation duration
                duration: 500,
                // easing of animation, similar to css transition params
                // "linear"|"ease"|"ease-in"|"ease-out"|
                // "ease-in-out"|[p1,p2,p3,p4]
                // [p1, p2, p3, p4] refer to cubic-bezier curve params
                easing: "ease",
                // use browser native animation in webkit
                // true|false
                nativeanimation: true
            }
          $(this).zoomTo(settings);
          evt.stopPropagation();
        },
        function(evt) {
            $("body").zoomTo({targetsize:1.0});
            evt.stopPropagation();
        });
        
        $("body").click(function(evt) {
            $(this).zoomTo({targetsize:1.0});
            evt.stopPropagation();
        });


    });
    </script>

{% endblock %}

{% block content %}

	<div id="canvas_header">
    	<div class="canvas_outer_wrapper">
            <div class="canvas_left_of_wrapper">
            	<div id="header_accent_bar"></div>
            </div>
            <div class="canvas_center">
                <div id="title">
                    <h1 class="click" style="display: inline">{{memory[0]}}</h1>
                </div>
                <div id="login">

                  {% if 'email' in session %}
                    <div id="canvas_login_prompt">You are logged in as {{session['email']}}.Log out <a href="{{ url_for('logout') }}">here</a>.</div>
                {% else %}

                	<div id="canvas_login_prompt">
                        Login <a id="canvas_login_text" href="#">here</a> to claim this memory<br />
                        or <a href="">connect</a> with Facebook
                    </div>
                    
                    <div id="canvas_login_div">
                        <form id="canvas_login_form" action="" method="post">
                            <div id="canvas_login_email"><input type="text" name="email" title="Login with new or existing email" class="field100" /></div>
                            <div id="canvas_login_pass"><input type="password" name="password" title="New or existing pass" class="field100" /></div>
                            <input id="canvas_login_submit" type="submit" class="input_button" name="submit" value="Login" />
                        </form>
                    </div>
                {% endif %}
                    
                </div>
                <div class="clear"></div>
            </div>
            <div class="canvas_right_of_wrapper">
			</div>
			<div class="clear"></div>
         </div>
    </div>
    
    <div id="canvas">
    	<div class="canvas_outer_wrapper">
            <div class="canvas_left_of_wrapper">
            	<div id="share_area">
                    <div id="share_bar"></div>
                    <div id="share_link_area">
                    	<p id="share_link_prompt">Click to copy to clipboard then paste in email or IM to let friends add memories</p>
                        <script> document.write("<input id=\"share_link_value\" type=\"text\" value=\"" + window.location + "\"/>"); </script>
                    </div>
                </div>
            </div>
            <div class="canvas_center">
              {% for item in memory[2] %}
                <img class="photo" src="{{item[1]}}" height="175"> </img>
              {% endfor %}


  <h3>Add to this memory:</h3>

    <form method=POST enctype=multipart/form-data action="{{url_for('memory',id=memory[1])}}">
        <p><label>Photo:</label><input type=file name=photo></p>
        <p><label>Title:</label><input type=text name=title></p>
        <p><label>Caption:</label><input type=text name=caption></p>
        <p><input type="submit" name="submit" value="Send my Photo!" /></p>
    </form>

  <p><a href="{{url_for('stream')}}">Browse</a> your memory stream. Or, <a href="{{url_for('new')}}">create</a> a new memory.</p>

            </div>
            <div class="canvas_right_of_wrapper">
            	<div id="bottom_accent_bar"></div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    
    <div id="canvas_footer">
    	<div class="canvas_outer_wrapper">
            <div class="canvas_left_of_wrapper">&nbsp;</div>
            <div class="canvas_center">
            	<div id="company_info">
                Collected through <a href="">Memoize</a><br/>
                <span id="company_info_descriptor"><a href="">About</a> | <a href="">Team</a> | <a href="">Contact</a></span>       
                </div>
                <div class="clear"></div>
            </div>
            <div class="canvas_right_of_wrapper">
            	<div id="footer_accent_bar"></div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    


{% endblock %}
