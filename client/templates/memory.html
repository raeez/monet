{% extends "layout.html" %}

{% block title %}Memoize Summary{% endblock %}

{% block head %}
{{ super() }}
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}" />

    <link rel="stylesheet" href="{{url_for('static', filename='css/zoomooz.css')}}" type="text/css" />
    <script type="text/javascript" src="{{url_for('static', filename='js/sylvester.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/purecssmatrix.js')}}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery.zoomooz.js')}}"></script>

    <script src="{{url_for('static', filename='js/jquery.jeditable.mini.js')}}"></script>

    <script type="text/javascript">

    $(document).ready(function()
    {
        $(".click").editable("http://www.appelsiini.net/projects/jeditable/php/echo.php", { 
            indicator : "<img src='{{url_for('static', filename='images/indicator.gif')}}'>",
            tooltip   : "Click to edit...",
            style  : "inherit"
        });
        
        $(".photo").toggle(function(evt) {
            console.log("clicked");
            settings = {
                // zoomed size relative to screen
                // 0.0-1.0
                targetsize: 0.9,
                // scale content to screen based on their size
                // "width"|"height"|"both"
                scalemode: "both",
                // animation duration
                duration: 500,
                // easing of animation, similar to css transition params
                // "linear"|"ease"|"ease-in"|"ease-out"|
                // "ease-in-out"|[p1,p2,p3,p4]
                // [p1, p2, p3, p4] refer to cubic-bezier curve params
                easing: "ease",
                // use browser native animation in webkit
                // true|false
                nativeanimation: true
            }
          $(this).zoomTo(settings);
          evt.stopPropagation();
        },
        function(evt) {
            $("body").zoomTo({targetsize:1.0});
            evt.stopPropagation();
        });
        
        $("body").click(function(evt) {
            $(this).zoomTo({targetsize:1.0});
            evt.stopPropagation();
        });


    });
    </script>

{% endblock %}

{% block content %}
  <div class="wrapper">
    <div id="header">
        <h1>You are viewing: </h1><h1 class="click" style="display: inline">{{memory[0]}}</h1>
    </div>
    
  {% if 'email' in session %}
    <p>You are logged in as {{session['email']}}.Log out <a href="{{ url_for('logout') }}">here</a>.</p>
  {% else %}
    <p>You are not logged in. Log in <a href="{{ url_for('login') }}">here</a> to claim this memory.</p>
  {% endif %}

    <div id="canvas">
      {% for item in memory[2] %}
        <img class="photo" src="{{item[1]}}" height="175"> </img>
      {% endfor %}
    </div>
    
  <h3>Add to this memory:</h3>

    <form method=POST enctype=multipart/form-data action="{{url_for('memory',id=memory[1])}}">
        <p><label>Photo:</label><input type=file name=photo></p>
        <p><label>Title:</label><input type=text name=title></p>
        <p><label>Caption:</label><input type=text name=caption></p>
        <p><input type="submit" name="submit" value="Send my Photo!" /></p>
    </form>

  <p><a href="{{url_for('stream')}}">Browse</a> your memory stream. Or, <a href="{{url_for('new')}}">create</a> a new memory.</p>

{% endblock %}
