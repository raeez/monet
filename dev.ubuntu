#!/bin/bash

if [ `whoami` != root ]; then
	echo Please run this script as root, or using sudo
	exit
fi

# clean current env, if any
rm -rf styx-dev

echo ""
echo "**********************************"
echo "* Setting up styx-dev environment *"
echo "**********************************"
echo ""

#mongodb snapshot sources
apt-add-repository 'deb http://downloads.mongodb.org/distros/ubuntu 10.10 10gen'
apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
apt-get update
apt-get upgrade

# system and python dependencies
apt-get -y install git \
					mongodb \
					python-virtualenv \
					python-setuptools \

# styx env
pip install virtualenv
virtualenv styx-dev
. styx/bin/activate

# python dependencies
pip install Flask \
				flup \
				sphinx \
				pymongo \
				ipython \
				pyflakes \

git clone git://fabfile.org/fabric.git fabric
python fabric/setup.py build
python fabric/setup.py install

echo ""
echo "***************"
echo "* styx::Done! *"
echo "***************"
echo ""
